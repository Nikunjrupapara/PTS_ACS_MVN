<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:with="brand=${dynamicFormBean.getBrand()}">
    <th:block th:replace="~{/companies/resideo/productRegistration/fragments :: getHead('__${dynamicFormBean.getBrand()}__')}" />
</head>
<body bgcolor="#FFFFFF" th:object="${dynamicFormBean}" th:with="brand=${dynamicFormBean.getBrand()}"><th:block th:replace="~{/companies/resideo/ga :: getBodyGATag('__${brand}__')}" />
<div id="container">

    <noscript>
        <div th:class="error">
            <p>Please enable javascript to use this website</p>
        </div>
    </noscript>
    <div id="innerContainer">
        <div id="header" th:include="~{/companies/resideo/productRegistration/fragments :: getHeader('__${brand}__')}">
            <div id="Honeywell_logo">
                <a href="https://www.resideo.com/us/en" target="_blank"><img th:src="@{/companies-static/resideo/images/HoneywellHomeLogo.png}" height="28" alt="Honeywell Home" border="0" /></a>
            </div>
            <div id="headline">
                WELCOME TO THE HONEYWELL HOME PRODUCT REGISTRATION PAGE
            </div>
            <div id="bodyCopy">
                <p>
                    We hope you&rsquo;re enjoying your Honeywell Home product. Please take a moment to register your product and we&rsquo;ll let you know if there are any product updates you should be aware of along with the latest information to keep your home comfortable and safe.
                </p>
                <p class="smalltype" th:replace="~{/companies/resideo/productRegistration/fragments :: getSignUpForEmailsLink('__${brand}__')}">
                    Don&rsquo;t have a Honeywell Home product yet? <a href="#" target="_blank">SIGN UP FOR OUR MARKETING EMAILS&nbsp;<img th:src="@{/companies-static/resideo/images/arrow2.png}" width="25" height="12" alt="" /></a>
                </p>
            </div>
        </div>
        <form id="form_area" method="post" th:action="@{'/p/profile/search/' + *{contextPath}}" th:object="${dynamicFormBean}" onsubmit="return checkUSCitizen();" accept-charset="utf-8">
            <div class="form-top">
                <div class="form-section">
                    <h2 th:replace="~{/companies/resideo/productRegistration/fragments :: getTitle('__${brand}__')}">
                        FIRST, SELECT WHAT TYPE OF HONEYWELL HOME PRODUCT YOU WANT TO REGISTER
                    </h2>

                    <!-- name="RadioGroup1" -->

                    <div class="radio-group">
                        <input type="radio" th:field="*{items['parentCat']}" value="Thermostat and Sensors" id="RadioGroup1_1">
                        <label for="RadioGroup1_1" class="radio-label">
                            <div class="radio-img-1"></div>
                            <p>THERMOSTAT + SENSOR</p>
                        </label>
                        <input type="radio" th:field="*{items['parentCat']}" value="Water Leak Detector" id="RadioGroup1_2">
                        <label for="RadioGroup1_2" class="radio-label">
                            <div class="radio-img-2"></div>
                            <p>WATER LEAK DETECTOR</p>
                        </label>
                        <input type="radio" th:field="*{items['parentCat']}" value="Cameras" id="RadioGroup1_3">
                        <label for="RadioGroup1_3" class="radio-label">
                            <div class="radio-img-3"></div>
                            <p>CAMERA</p>
                        </label>
                        <input type="radio" th:field="*{items['parentCat']}" value="Professional Security" id="RadioGroup1_4">
                        <label for="RadioGroup1_4" class="radio-label">
                            <div class="radio-img-4"></div>
                            <p>PROFESSIONAL SECURITY</p>
                        </label>
                        <input type="radio" th:field="*{items['parentCat']}" value="Air Quality" id="RadioGroup1_5">
                        <label for="RadioGroup1_5" class="radio-label">
                            <div class="radio-img-5"></div>
                            <p>AIR QUALITY</p>
                        </label>
                    </div>
                </div>

                <hr>

                <div class="form-section">
                    <center>
                        <h2>NEXT, SELECT WHAT MODEL YOU HAVE</h2>
                        <!-- name="product" -->
                        <div class="custom-select">
                            <select th:field="*{items['product']}" id="product" required>
                                <option disabled value="" selected>Select a product</option>
                            </select>
                            <span class="custom-arrow"></span>
                        </div>
                        <p>Not sure what model you have? <a href="#" target="_blank" th:replace="~{/companies/resideo/productRegistration/fragments :: getVisitCSPageLink('__${brand}__')}">VISIT OUR CUSTOMER SUPPORT PAGE</a> for help.</p>
                    </center>
                </div>


                <div id="con" >
                    <div class="success">
                        <div class="success-row">
                            <img th:src="@{/companies-static/resideo/images/icon_alertw.png}" width="50" height="50" alt="">
                            <div>
                                <h2 class="bt30">IT LOOKS LIKE YOU HAVE ONE OF OUR CONNECTED PRODUCTS. </h2>
                                <p>The <span id="productName"></span> is a product that is controlled by our <span id="appName"></span>. To register this product please download the latest app and complete the registration process.</p>
                                <div class="row">
                                    <p class="ios-link"><a href="#" target="_blank" class="appLink">iOS APP&nbsp;<img th:src="@{/companies-static/resideo/images/arrow2w.png}" width="25" height="12" alt="" /></a></p>
                                    <p><a href="#" target="_blank" class="appLink">ANDROID APP&nbsp;<img th:src="@{/companies-static/resideo/images/arrow2w.png}" width="25" height="12" alt="" /></a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>	<!-- end of id="con" -->

                <div id="non-con">
                    <hr>

                    <div class="form-section">
                        <h2>
                            LAST, TELL US A LITTLE ABOUT YOURSELF
                        </h2>
                        <input type="text" id="firstname" th:field="*{items['firstName']}" placeholder="First Name*" maxlength="50" required>
                        <input type="text" id="lastname" th:field="*{items['lastName']}" placeholder="Last Name*" maxlength="50" required>
                        <input type="email" id="email" th:field="*{items['email']}" placeholder="Email address*" maxlength="255"
                               onkeyup="this.value = this.value.toLowerCase();" required>
                        <div class="custom-select">
                            <select th:field="*{items['country']}" id="country" required>
                                <option value="" disabled selected>Country*</option>
                                <option value="US">United States</option>
                                <option value="CA">Canada</option>
                            </select>
                            <span class="custom-arrow"></span>
                        </div>
                        <input type="text" id="address1" th:field="*{items['address']}" placeholder="Address" maxlength="255">
                        <input type="text" id="city" th:field="*{items['city']}" placeholder="City" maxlength="150" >
                        <div class="form-row">
                            <div class="custom-select half-width">
                                <select th:field="*{items['state']}" id="state" required>
                                    <option value="" disabled selected>State/Province*</option>
                                    <option value="AL">Alabama</option>
                                    <option value="AK">Alaska</option>
                                    <option value="AZ">Arizona</option>
                                    <option value="AR">Arkansas</option>
                                    <option value="CA">California</option>
                                    <option value="CO">Colorado</option>
                                    <option value="CT">Connecticut</option>
                                    <option value="DE">Delaware</option>
                                    <option value="DC">District Of Columbia</option>
                                    <option value="FL">Florida</option>
                                    <option value="GA">Georgia</option>
                                    <option value="HI">Hawaii</option>
                                    <option value="ID">Idaho</option>
                                    <option value="IL">Illinois</option>
                                    <option value="IN">Indiana</option>
                                    <option value="IA">Iowa</option>
                                    <option value="KS">Kansas</option>
                                    <option value="KY">Kentucky</option>
                                    <option value="LA">Louisiana</option>
                                    <option value="ME">Maine</option>
                                    <option value="MD">Maryland</option>
                                    <option value="MA">Massachusetts</option>
                                    <option value="MI">Michigan</option>
                                    <option value="MN">Minnesota</option>
                                    <option value="MS">Mississippi</option>
                                    <option value="MO">Missouri</option>
                                    <option value="MT">Montana</option>
                                    <option value="NE">Nebraska</option>
                                    <option value="NV">Nevada</option>
                                    <option value="NH">New Hampshire</option>
                                    <option value="NJ">New Jersey</option>
                                    <option value="NM">New Mexico</option>
                                    <option value="NY">New York</option>
                                    <option value="NC">North Carolina</option>
                                    <option value="ND">North Dakota</option>
                                    <option value="OH">Ohio</option>
                                    <option value="OK">Oklahoma</option>
                                    <option value="OR">Oregon</option>
                                    <option value="PA">Pennsylvania</option>
                                    <option value="RI">Rhode Island</option>
                                    <option value="SC">South Carolina</option>
                                    <option value="SD">South Dakota</option>
                                    <option value="TN">Tennessee</option>
                                    <option value="TX">Texas</option>
                                    <option value="UT">Utah</option>
                                    <option value="VT">Vermont</option>
                                    <option value="VA">Virginia</option>
                                    <option value="WA">Washington</option>
                                    <option value="WV">West Virginia</option>
                                    <option value="WI">Wisconsin</option>
                                    <option value="WY">Wyoming</option>
                                </select>
                                <span class="custom-arrow"></span>
                            </div>
                            <input type="text" id="zip" th:field="*{items['zip']}" placeholder="Zip/Postal code*" required pattern="[0-9]{5}" class="half-width" title="Please use 5 digit zipcode">
                        </div>
                        <div class="form-row">
                            <!-- type='tel' -->
                            <input type="text" id="phone" th:field="*{items['phone']}" placeholder="Mobile/Phone number" class="half-width" pattern='[\+]?\d{1,2}[\(\s-]?\d{3,4}[\)\s-]?\d{3}[\-\s-]?\d{4}' title='Phone Number (Format: 1(999)999-9999)'>
                            <label class="checkbox-label">I agree to receive mobile SMS communications.
                                <input type="checkbox" th:field="*{items['sms']}" th:value="Y" id="sms">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                    <hr>
                    <div class="form-section">
                        <div class="form-row">
                            <label class="checkbox-label" th:include="~{/companies/resideo/productRegistration/fragments :: getResidentLable('__${brand}__')}"><p>I am a US or CA resident over 18 years of age and agree to the <a href="#" target="_blank">HONEYWELL HOME PRIVACY POLICY</a>.*</p>
                                <input type="checkbox" th:field="*{items['resident']}" value="resident" id="resident">
                                <span class="checkmark"></span>
                            </label>
                            <div class="submit-button">
                                <input type="submit" name="submit" id="submit" value="SUBMIT">
                            </div>
                        </div>
                    </div>

                </div><!-- end of id="non-con" -->

            </div>
            <input type="hidden" id="productId" th:field="*{items['productId']}" />
            <input type="hidden" id="source" th:field="*{items['source']}" />
            <input type="hidden" th:field="*{brand}" />
        </form>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('email')}">
            <p>Please correct email address</p>
        </div>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('firstName')}">
            <p>Please correct First Name.</p>
        </div>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('lastName')}">
            <p>Please correct Last Name.</p>
        </div>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('usCitizen')}">
            <p>We're sorry. Only US or CA citizens are eligible for this product.</p>
        </div>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('zip')}">
            <p>Please correct Zip/Postal</p>
        </div>
        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('phone')}">
            <p>Please correct Mobile/Phone number</p>
        </div>

        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('city')}">
            <p>Please correct City</p>
        </div>

        <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('address')}">
            <p>Please correct Address</p>
        </div>


    </div>

</div>

<div th:insert="~{companies/resideo/productRegistration/fragments :: jsParameters}"></div>

<script th:src="@{/companies-static/resideo/js/jquery.min.js}"></script>
<script th:src="@{/companies-static/resideo/dx/ym.js}"></script>
<script th:src="@{/companies-static/resideo/js/waitMe.min.js}"></script>



<script type="text/javascript">
let isConnectedMap = new Map();
let idMap = new Map();
let appLinkMap =  new Map();
let appNameMap = new Map();
let resource =  new Resource({base:$("#services").val(),token:$("#jwt").val()});

$(document).ready(function() {


	$("#con").hide();
	$("#non-con").hide();

	if($("#brand").val()=="honeywellhome"){
        $("#source").val("honeywellProdReg");
    }else{
        $("#source").val("resideoProdReg");
    }

   	$("input[name='items[\\'parentCat\\']']").click(loadCatWrapper);
	$('#product').change(loadProduct);

	function loadCat(func){
	    $("#con").hide();
        $("#non-con").hide();
	    $("body").waitMe({});
        let parentCat = $("input[name='items[\\'parentCat\\']']:checked").val();
        $("#product option").remove();
        $("#product").append("<option value='' disabled selected>Searching...</option>");

        let start = 0;
        let count = 300;
        let productId = $("#productId").val();

        resource.loadRecords({parentCat,start,count},function(records){

            let options = "<option value='' disabled selected>Select a product</option>";
            records = records.sort(function(a, b) {var x = a.productName; var y = b.productName; return ((x < y) ? -1 : ((x > y) ? 1 : 0));});

            records.forEach(record=>{

                let productName = record.productName+" - Model "+record.modelNumber;
                isConnectedMap.set(productName,record.isConnected);
                idMap.set(productName,record.productId);
                appLinkMap.set(productName,record.appLink);
                appNameMap.set(productName,record.appName);

                if(productId==record.productId){
                    options+="<option value='"+productName+"' selected=true>"+productName+"</option>";
                }else{
                    options+="<option value='"+productName+"'>"+productName+"</option>";
                }

            });
            $("#product").html(options).promise().done(function( arg1 ) {
               $("body").waitMe('hide');
              func();
            });
        },function(){
            // fail
             $("body").waitMe('hide');
        });
	}

	function loadProduct(){

        let nm = $("#product").val();
        $("#productId").val(idMap.get(nm));
        if(isConnectedMap.has(nm)){
            if(isConnectedMap.get(nm)==="true"){
                $("#productName").html(nm);
                $("#appName").html(appNameMap.get(nm));
                $(".appLink").attr("href",appLinkMap.get(nm));

        	    $("#con").show();
        	    $("#non-con").hide();
            }else{
    		    $("#non-con").show();
    		    $("#con").hide();
            }
        }
	}

	function loadCatWrapper(){loadCat(function(){
	    $("#country").val("");

	});}
	function loadProductWrapper(){loadProduct();}

	if($("#productId").val()){
	    loadCat(loadProductWrapper);
	}

	$('#country').change(setUSRequired);

	function setUSRequired(){
        let CA = '<option value="" disabled selected>State/Province*</option><option value="AB">Alberta</option><option value="BC">British Columbia</option><option value="MB">Manitoba</option><option value="NB">New Brunswick</option><option value="NL">Newfoundland and Labrador</option><option value="NT">Northwest Territories</option><option value="NS">Nova Scotia</option><option value="NU">Nunavut</option><option value="ON">Ontario</option><option value="PE">Prince Edward Island</option><option value="QC">Quebec</option><option value="SK">Saskatchewan</option><option value="YT">Yukon</option>';
        let US = '<option value="" disabled selected>State/Province*</option><option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="DC">District Of Columbia</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option>';

	    let selectedCountry =  $("#country").val();
	    if(selectedCountry=="US"){
	        $("#zip").attr("required","");
	        $("#zip").attr("pattern","[0-9]{5}");
	        $("#state").html(US);
	    }else{
	        $("#zip").removeAttr("required");
	        $("#zip").removeAttr("pattern");
	        $("#state").html(CA);
	    }

	}
    setUSRequired();
});

</script>
<script type="text/javascript">
        function checkUSCitizen() {
            if(!(document.getElementById("resident").checked)){
	            alert("We're sorry. Only US or CA citizens are eligible for this product.");
 				return false;
            }
            document.getElementById("submit").disabled = true;
            return true;
        }
</script>

</body>
</html>