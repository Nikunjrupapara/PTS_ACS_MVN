<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>


<th:block th:fragment="head">

  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  
  <link  th:href="@{/companies-static/kalmbachmedia/css/normalize.css}" rel="stylesheet" type="text/css"/>
  <link  th:href="@{/companies-static/kalmbachmedia/css/webflow.css}" rel="stylesheet" type="text/css"/>
  <link  th:href="@{/companies-static/kalmbachmedia/css/preference-center-sign-up-1a.webflow.css}" rel="stylesheet" type="text/css"/>
  
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Poppins:regular,600,600italic,700,800,800italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link th:href="@{/companies-static/kalmbachmedia/images/favicon.png}" rel="shortcut icon" type="image/x-icon">
  <link th:href="@{/companies-static/kalmbachmedia/images/webclip.png}" rel="apple-touch-icon">    
    
</th:block>



<th:block th:fragment="mainform">

  <div class="epc-form">
    <div class="w-container">
      <div class="sign-up-div">

        <div class="form-block-3 w-form">



          <div class="text-div-1 fullwidth">
            <h1 class="hed-1">Railroading Brands</h1>
          </div>
          <div class="w-layout-grid grid-2 track-title-grid">
            <label id="w-node-c7b257c0ed32-08e382c7" class="w-checkbox checkbox-field">
              <img th:src="@{/companies-static/kalmbachmedia/images/CTR_logo.png}" loading="lazy" width="223" sizes="(max-width: 479px) 83vw, (max-width: 767px) 223px, (max-width: 991px) 208.390625px, 223px" srcset="/companies-static/kalmbachmedia/images/CTR_logo-p-500.png 500w, /companies-static/kalmbachmedia/images/CTR_logo.png 609w" alt="Classic Trains logo" class="image">
              <input type="checkbox" id="ctri" name="CTR" data-name="Classic Trains" class="w-checkbox-input checkbox brand" value="Yes"  >
              <span for="ctri" class="checkbox-label w-form-label">Classic Trains</span>
            </label>
            <label class="w-checkbox checkbox-field-2">
              <img th:src="@{/companies-static/kalmbachmedia/images/CTT_logo.jpg}" loading="lazy" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/CTT_logo-p-500.jpeg 500w, /companies-static/kalmbachmedia/images/CTT_logo.jpg 554w" alt="Classic Toy Trains logo" class="image-2">
              <input type="checkbox" id="ctti" name="CTT" data-name="Classic Toy Trains" class="w-checkbox-input checkbox-2 brand" value="Yes" >
              <span for="ctti" class="checkbox-label w-form-label">Classic Toy Trains</span>
            </label>
            <label id="w-node-03be8dcf47f2-08e382c7" class="w-checkbox checkbox-field-3">
              <img th:src="@{/companies-static/kalmbachmedia/images/grw_logo.png}" loading="lazy" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/grw_logo-p-500.png 500w, /companies-static/kalmbachmedia/images/grw_logo.png 576w" alt="Garden Railways logo" class="image-2">
              <input type="checkbox" id="grwi" name="GRW" data-name="Garden Railways" class="w-checkbox-input checkbox-3 brand" value="Yes" >
              <span for="grwi" class="checkbox-label w-form-label">Garden Railways</span>
            </label>
            <label id="w-node-d7ba9d9ddf36-08e382c7" class="w-checkbox checkbox-field-4">
              <img th:src="@{/companies-static/kalmbachmedia/images/kalmbach-hobby-store.png}" loading="lazy" alt="Kalmbach Hobby Store logo" class="image-2">
              <input type="checkbox" id="hbsi" name="HBS" data-name="Kalmbach Hobby Store" class="w-checkbox-input checkbox-4 brand" value="Yes" >
              <span for="hbsi" class="checkbox-label w-form-label">Kalmbach Hobby Store</span>
            </label>
            <label id="w-node-28d9cb4ed14e-08e382c7" class="w-checkbox checkbox-field-5">
              <img th:src="@{/companies-static/kalmbachmedia/images/MRR_logo.jpg}" loading="lazy" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/MRR_logo-p-500.jpeg 500w, /companies-static/kalmbachmedia/images/MRR_logo.jpg 727w" alt="Model Railroader logo" class="image-3">
              <input type="checkbox" id="mrri" name="MRR" data-name="Model Railroader" class="w-checkbox-input checkbox-5 brand" value="Yes" >
              <span for="mrri" class="checkbox-label w-form-label">Model Railroader</span>
            </label>
            <label id="w-node-99337ca7a144-08e382c7" class="w-checkbox checkbox-field-6">
              <img th:src="@{/companies-static/kalmbachmedia/images/TRN_logo.jpg}" loading="lazy" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/TRN_logo-p-500.jpeg 500w, /companies-static/kalmbachmedia/images/TRN_logo.jpg 574w" alt="Trains logo" class="image-4">
              <input type="checkbox" id="trni" name="TRN" data-name="Trains" class="w-checkbox-input checkbox-6 brand" value="Yes" >
              <span for="trni" class="checkbox-label w-form-label">Trains</span>
            </label>
            <label id="w-node-e27f535a3597-08e382c7" class="w-checkbox checkbox-field-7">
              <img th:src="@{/companies-static/kalmbachmedia/images/TRN_Logo_Stack.png}" loading="lazy" alt="Trains.com logo" class="image-5">
              <input type="checkbox" id="tdci" name="TDC" data-name="Trains.com" class="w-checkbox-input checkbox-8 brand" value="Yes" >
              <span for="tdci" class="checkbox-label w-form-label">Trains.com</span>
            </label>
            <label id="w-node-5a6e4f1f49c0-08e382c7" class="w-checkbox checkbox-field-8">
              <img th:src="@{/companies-static/kalmbachmedia/images/trains-industry.jpg}" loading="lazy" alt="Trains Industry news logo" class="image-6">
              <input type="checkbox" id="tini" name="TIN" data-name="Trains Industry" class="w-checkbox-input checkbox-7 brand" value="Yes" >
              <span for="tini" class="checkbox-label w-form-label">Trains Industry</span>
            </label>

          </div>
          <div class="trains-topic-bar">
            <div class="text-div-1 fullwidth topics-bar">
              <h1 class="hed-1 topics-hed-red">Railroading Topics</h1>
            </div>
          </div>
          <div class="enter-your-info-div _25-bottom">
            <p class="body-2 bold">Get the content you love! Check the boxes next to each topic that interests you to receive more of what you want and less of what you don&#x27;t.</p>
          </div>
          <div class="w-layout-grid grid-3 topics-grid">

            <label class="w-checkbox">
              <input type="checkbox" id="Beginner" th:field="*{items['cusCat_beginner']}" data-name="Beginner" class="w-checkbox-input" value="Yes" >
              <span for="Beginner" class="checkbox-label w-form-label">Beginner</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Expert Tips" th:field="*{items['cusCat_experttips']}" data-name="Expert Tips" class="w-checkbox-input" value="Yes" >
              <span for="Expert Tips" class="checkbox-label w-form-label">Expert Tips</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Freight Rail" th:field="*{items['cusCat_freightrail']}" data-name="Freight Rail" class="w-checkbox-input" value="Yes" >
              <span for="Freight Rail" class="checkbox-label w-form-label">Freight Rail</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="How-to/DIY" th:field="*{items['cusCat_howto']}" data-name="How-to/DIY" class="w-checkbox-input" value="Yes" >
              <span for="How-to/DIY" class="checkbox-label w-form-label">How-to/DIY</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Layouts" th:field="*{items['cusCat_layouts']}" data-name="Layouts" class="w-checkbox-input" value="Yes" >
              <span for="Layouts" class="checkbox-label w-form-label">Layouts</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Passenger Rail" th:field="*{items['cusCat_passengerrail']}" data-name="Passenger Rail" class="w-checkbox-input" value="Yes" >
              <span for="Passenger Rail" class="checkbox-label w-form-label">Passenger Rail</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Photos" th:field="*{items['cusCat_photos']}" data-name="Photos" class="w-checkbox-input" value="Yes" >
              <span for="Photos" class="checkbox-label w-form-label">Photos</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Railfanning &amp; Railroad Preservation" th:field="*{items['cusCat_railfanning']}" data-name="Railfanning &amp; Railroad Preservation" class="w-checkbox-input" value="Yes" >
              <span for="Railfanning &amp; Railroad Preservation" class="checkbox-label w-form-label">Railfanning &amp; Railroad Preservation</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Railroad Industry" th:field="*{items['cusCat_railroadindustry']}" data-name="Railroad Industry" class="w-checkbox-input" value="Yes" >
              <span for="Railroad Industry" class="checkbox-label w-form-label">Railroad Industry</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Railroad Stories" th:field="*{items['cusCat_railroadstories']}" data-name="Railroad Stories" class="w-checkbox-input" value="Yes" >
              <span for="Railroad Stories" class="checkbox-label w-form-label">Railroad Stories</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Track Plans and Projects" th:field="*{items['cusCat_trackplans']}" data-name="Track Plans and Projects" class="w-checkbox-input" value="Yes" >
              <span for="Track Plans and Projects" class="checkbox-label w-form-label">Track Plans &amp; Projects</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Train Basics" th:field="*{items['cusCat_trainbasics']}" data-name="Train Basics" class="w-checkbox-input" value="Yes" >
              <span for="Train Basics" class="checkbox-label w-form-label">Train Basics</span>
            </label>
            <label class="w-checkbox">
              <input type="checkbox" id="Videos" th:field="*{items['cusCat_videos']}" data-name="Videos" class="w-checkbox-input" value="Yes"  >
              <span for="Videos" class="checkbox-label w-form-label">Videos</span>
            </label>


          </div>
        </div>
        <div class="text-div-1 fullwidth science-bar">
          <h1 class="hed-1">Science Brands</h1>
        </div>
        <div class="form-block-4 w-form">
          <div id="email-form-4"  class="form-2">
            <div class="w-layout-grid grid-2 track-title-grid">

              <label id="w-node-8a889c95b9a1-08e382c7" class="w-checkbox checkbox-field-12">
                <img th:src="@{/companies-static/kalmbachmedia/images/ASY_Logo_red.jpg}" loading="lazy" alt="Astronomy logo" class="image-8">
                <input type="checkbox" id="asyi" name="ASY" data-name="Astronomy" class="w-checkbox-input checkbox-10 brand" value="Yes" >
                <span for="asyi" class="checkbox-label w-form-label">Astronomy</span>
              </label>
              <label id="w-node-b817ed95b793-08e382c7" class="w-checkbox checkbox-field-9">
                <img th:src="@{/companies-static/kalmbachmedia/images/dsc.jpg}" loading="lazy" alt="Discover logo" class="image-9">
                <input type="checkbox" id="dsci" name="DSC" data-name="Discover" class="w-checkbox-input checkbox-11 brand" value="Yes" >
                <span for="dsci" class="checkbox-label w-form-label">Discover</span>
              </label>
              <label id="w-node-79e37c4a4023-08e382c7" class="w-checkbox checkbox-field-10">
                <img th:src="@{/companies-static/kalmbachmedia/images/mss-logo.jpg}" loading="lazy" alt="My Science Shop" class="image-10">
                <input type="checkbox" id="scii" name="SCI" data-name="My Science Shop" class="w-checkbox-input checkbox-12 brand" value="Yes" >
                <span for="scii" class="checkbox-label w-form-label">My Science Shop</span>
              </label>
              <label id="w-node-0f0c21ddf75d-08e382c7" class="w-checkbox checkbox-field-11">
                <img th:src="@{/companies-static/kalmbachmedia/images/SaBB_Logo_moon.jpg}" loading="lazy" alt="The Space and Beyond Box logo" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/SaBB_Logo_moon-p-500.jpeg 500w, /companies-static/kalmbachmedia/images/SaBB_Logo_moon-p-800.jpeg 800w, /companies-static/kalmbachmedia/images/SaBB_Logo_moon.jpg 900w" class="image-11">
                <input type="checkbox" id="asxi" name="ASX" data-name="Space &amp; Beyond Box" class="w-checkbox-input checkbox-13 brand" value="Yes"  >
                <span for="asxi" class="checkbox-label w-form-label">Space &amp; Beyond Box</span>
              </label>
            </div>

            <div class="text-div-1 fullwidth topics-bar">
              <h1 class="hed-1 topics-hed-blue">Science Topics</h1>
            </div>
            <div class="enter-your-info-div _25-bottom">
              <p class="body-2 bold">Get the content you love! Check the boxes next to each topic that interests you to receive more of what you want and less of what you don&#x27;t.</p>
            </div>
            <div class="w-layout-grid grid-6">

              <label class="w-checkbox checkbox-field-13">
                <input type="checkbox" id="Biology" th:field="*{items['cusCat_biology']}" data-name="Biology" class="w-checkbox-input" value="Yes" >
                <span for="Biology" class="checkbox-label w-form-label">Biology</span>
              </label>
              <label class="w-checkbox checkbox-field-14">
                <input type="checkbox" id="Chemistry" th:field="*{items['cusCat_chemistry']}" data-name="Chemistry" class="w-checkbox-input" value="Yes" >
                <span for="Chemistry" class="checkbox-label w-form-label">Chemistry</span>
              </label>
              <label class="w-checkbox checkbox-field-15">
                <input type="checkbox" id="Environment" th:field="*{items['cusCat_environment']}" data-name="Environment" class="w-checkbox-input" value="Yes" >
                <span for="Environment" class="checkbox-label w-form-label">Environment</span>
              </label>
              <label class="w-checkbox checkbox-field-16">
                <input type="checkbox" id="Health" th:field="*{items['cusCat_health']}" data-name="Health" class="w-checkbox-input" value="Yes" >
                <span for="Health" class="checkbox-label w-form-label">Health</span>
              </label>
              <label class="w-checkbox checkbox-field-17">
                <input type="checkbox" id="Mind" th:field="*{items['cusCat_mind']}" data-name="Mind" class="w-checkbox-input" value="Yes" >
                <span for="Mind" class="checkbox-label w-form-label">Mind</span>
              </label>
              <label class="w-checkbox checkbox-field-18">
                <input type="checkbox" id="Physics" th:field="*{items['cusCat_physics']}" data-name="Physics" class="w-checkbox-input" value="Yes" >
                <span for="Physics" class="checkbox-label w-form-label">Physics</span>
              </label>
              <label class="w-checkbox checkbox-field-19">
                <input type="checkbox" id="Planet Earth" th:field="*{items['cusCat_planetearth']}" data-name="Planet Earth" class="w-checkbox-input" value="Yes" >
                <span for="Planet Earth" class="checkbox-label w-form-label">Planet Earth</span>
              </label>
              <label class="w-checkbox"><input type="checkbox" id="Technology" th:field="*{items['cusCat_technology']}" data-name="Technology" class="w-checkbox-input" value="Yes" >
                <span for="Technology" class="checkbox-label w-form-label">Technology</span>
              </label>

            </div>

            <div class="w-layout-grid grid-10">

              <div id="w-node-49e2bdbb2a68-08e382c7">
                <div class="text-div-1 fullwidth topics-bar-blue">
                  <h1 class="hed-1 topics-hed-blue">Astronomy Topics</h1>
                </div>
              </div>

              <label class="w-checkbox checkbox-field-20">
                <input type="checkbox" id="Astronomy" th:field="*{items['cusCat_astronomy']}" data-name="Astronomy" class="w-checkbox-input" value="Yes" >
                <span for="Astronomy" class="checkbox-label w-form-label">Astronomy</span>
              </label>
              <label class="w-checkbox checkbox-field-21">
                <input type="checkbox" id="Deep-sky Objects" th:field="*{items['cusCat_deepskyobjects']}" data-name="Deep-sky Objects" class="w-checkbox-input" value="Yes" >
                <span for="Deep-sky Objects" class="checkbox-label w-form-label">Deep-Sky Objects</span>
              </label>
              <label class="w-checkbox checkbox-field-22">
                <input type="checkbox" id="Exotic Objects" th:field="*{items['cusCat_exoticobjects']}" data-name="Exotic Objects" class="w-checkbox-input" value="Yes" >
                <span for="Exotic Objects" class="checkbox-label w-form-label">Exotic Objects</span>
              </label>
              <label class="w-checkbox checkbox-field-23">
                <input type="checkbox" id="Observing" th:field="*{items['cusCat_observing']}" data-name="Observing" class="w-checkbox-input" value="Yes" >
                <span for="Observing" class="checkbox-label w-form-label">Observing</span>
              </label>
              <label class="w-checkbox checkbox-field-24">
                <input type="checkbox" id="Our Solar System" th:field="*{items['cusCat_oursolarsystem']}" data-name="Our Solar System" class="w-checkbox-input" value="Yes" >
                <span for="Our Solar System" class="checkbox-label w-form-label">Our Solar System</span>
              </label>
              <label class="w-checkbox checkbox-field-25">
                <input type="checkbox" id="Space News" th:field="*{items['cusCat_spacenews']}" data-name="Space News" class="w-checkbox-input" value="Yes" >
                <span for="Space News" class="checkbox-label w-form-label">Space News</span>
              </label>
              <label class="w-checkbox">
                <input type="checkbox" id="Spaceflight &amp; Exploration" th:field="*{items['cusCat_spaceexploration']}" data-name="Spaceflight &amp; Exploration" class="w-checkbox-input" value="Yes" >
                <span for="Spaceflight &amp; Exploration" class="checkbox-label w-form-label">Spaceflight &amp; Exploration</span>
              </label>

            </div>
          </div>

        </div>
        <div class="text-div-1 fullwidth model-bar">
          <h1 class="hed-1">Scale Modeling Brands</h1>
        </div>

        <div class="w-form">
          <div id="email-form-6"  class="form-6">

            <div class="w-layout-grid grid-2 track-title-grid">

              <label id="w-node-8a889c95b9a1-08e382c7" class="w-checkbox checkbox-field-12">

              </label>
              <label id="w-node-b817ed95b793-08e382c7" class="w-checkbox checkbox-field-9">
                <img th:src="@{/companies-static/kalmbachmedia/images/fsm_green.png}" loading="lazy" alt="FineScale Modeler logo" sizes="100vw" srcset="/companies-static/kalmbachmedia/images/fsm_green-p-500.png 500w, /companies-static/kalmbachmedia/images/fsm_green.png 700w" class="image-2">
                <input type="checkbox" id="fsmi" name="FSM" data-name="Checkbox 4" class="w-checkbox-input checkbox-14 brand" value="Yes" >
                <span for="fsmi" class="checkbox-label w-form-label">FineScale Modeler</span>
              </label>
              <label id="w-node-79e37c4a4023-08e382c7" class="w-checkbox checkbox-field-10">
                <img th:src="@{/companies-static/kalmbachmedia/images/kalmbach-hobby-store.png}" loading="lazy" alt="Kalmbach Hobby Store logo" class="image-2">
                <input type="checkbox" id="hbs2i" name="HBS2" data-name="Kalmbach Hobby Store" class="w-checkbox-input checkbox-4 brand" value="Yes" >
                <span for="hbs2i" class="checkbox-label w-form-label">Kalmbach Hobby Store</span>
              </label>
              <label id="w-node-0f0c21ddf75d-08e382c7" class="w-checkbox checkbox-field-11">
                <!--KalmbachHobbyStore2-->
              </label>
            </div>

            <div class="text-div-1 fullwidth topics-bar">
              <h1 class="hed-1 topics-hed">Scale Modeling Topics</h1>
            </div>
            <div class="enter-your-info-div _25-bottom">
              <p class="body-2 bold">Get the content you love! Check the boxes next to each topic that interests you to receive more of what you want and less of what you don&#x27;t.</p>
            </div>
            <div class="w-layout-grid grid-9">
              <label class="w-checkbox checkbox-field-26">
                <input type="checkbox" id="Aircraft" th:field="*{items['cusCat_aircraft']}" data-name="Aircraft" class="w-checkbox-input" value="Yes" >
                <span for="Aircraft" class="checkbox-label w-form-label">Aircraft</span>
              </label>
              <label class="w-checkbox checkbox-field-27">
                <input type="checkbox" id="Armor" th:field="*{items['cusCat_armors']}" data-name="Armor" class="w-checkbox-input" value="Yes" >
                <span for="Armor" class="checkbox-label w-form-label">Armor</span>
              </label>
              <label class="w-checkbox checkbox-field-28">
                <input type="checkbox" id="Automobiles" th:field="*{items['cusCat_automobiles']}" data-name="Automobiles" class="w-checkbox-input" value="Yes" >
                <span for="Automobiles" class="checkbox-label w-form-label">Automobiles</span>
              </label>
              <label class="w-checkbox checkbox-field-29">
                <input type="checkbox" id="Figures" th:field="*{items['cusCat_figures']}" data-name="Figures" class="w-checkbox-input" value="Yes" >
                <span for="Figures" class="checkbox-label w-form-label">Figures</span>
              </label>
              <label class="w-checkbox checkbox-field-30">
                <input type="checkbox" id="Sci-Fi" th:field="*{items['cusCat_scifi']}" data-name="Sci-Fi" class="w-checkbox-input" value="Yes" >
                <span for="Sci-Fi" class="checkbox-label w-form-label">Sci-Fi</span>
              </label>
              <label class="w-checkbox">
                <input type="checkbox" id="Ships" th:field="*{items['cusCat_ships']}" data-name="Ships" class="w-checkbox-input" value="Yes" >
                <span for="Ships" class="checkbox-label w-form-label">Ships</span>
              </label></div>

            <div class="button-div">
              <input type="submit" value="Update" data-wait="Please wait..." class="submit-button w-button" onclick="javascript: return validate()"></div>
          </div>

          <br clear="all"><br clear="all"><br clear="all">
          <div id="w-form-fail" class="error-message w-form-fail" style="display:none;"></div>
          <div th:class="error" data-abide-error th:if="${dynamicFormBean.isError('birthDate')}">
            <center  class="error-message" style="color:red">Please correct Birth Date</center>
          </div>

        </div>

      </div>
    </div>
  </div>

  <div  class="w-form">
    <div>
      <p align="center"><strong>Questions or Comments?</strong><br>Call us at 1-800-533-6644<br>Outside the U.S. and Canada 1-903-636-1125<br>Or use the <a href="http://apps.kalmbach.com/newsletters/Default.aspx" target="_blank" style="color:#FF0000; font-weight:bold;">Customer Service Help Center</a><br><br><a href="http://www.kalmbach.com/privacy" style="color:#000000;" target="_blank">View Privacy Policy</a>&nbsp;&nbsp;|&nbsp;&nbsp;Copyright 2021 &copy; <a href="http://www.kalmbach.com/" style="color:#000000;" target="_blank">Kalmbach Media</a><br><br></p>
    </div>
  </div>


  <input type="hidden" th:field="*{items['cusCwbir']}" id="cusCwbir" />
  <input type="hidden" th:field="*{items['cusDabir']}" id="cusDabir" />
  <input type="hidden" th:field="*{items['cusScbir']}" id="cusScbir" />

  <!--
      classic trains
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwctr']}" id="cwctr"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDactr']}" id="dactr"  value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScctr']}" id="scctr"  value="Preference" />

  <!--
      classic toy trains
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwctt']}" id="cwctt"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDactt']}" id="dactt" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScctt']}" id="scctt"  value="Preference" />

  <!--
      garden railways
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwgrw']}" id="cwgrw"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDagrw']}" id="dagrw" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScgrw']}" id="scgrw" value="Preference" />

  <!--
      kalmbach hobby store
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwhbs']}" id="cwhbs"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDahbs']}" id="dahbs" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusSchbs']}" id="schbs" value="Preference" />

  <!--
      model railroader
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwmrr']}" id="cwmrr" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDamrr']}" id="damrr" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScmrr']}" id="scmrr" value="Preference" />

  <!--
      trains
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwtrn']}" id="cwtrn"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDatrn']}" id="datrn" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusSctrn']}" id="sctrn" value="Preference" />

  <!--
      trains.com
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwtdc']}" id="cwtdc"  value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDatdc']}" id="datdc" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusSctdc']}" id="sctdc" value="Preference" />

  <!--
      trains industry
      hobby division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwtind']}" id="cwtin" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDatind']}" id="datin" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusSctind']}" id="sctin" value="Preference" />


  <!--
      astronomy
      science division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwasy']}" id="cwasy" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDaasy']}" id="daasy" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScasy']}" id="scasy" value="Preference" />

  <!--
      discover
      science division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwdsc']}" id="cwdsc" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDadsc']}" id="dadsc" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScdsc']}" id="scdsc" value="Preference" />

  <!--
      my science shop
      science division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwsci']}" id="cwsci" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDasci']}" id="dasci" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScsci']}" id="scsci" value="Preference" />

  <!--
      space & beyond box
      science division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwasx']}" id="cwasx" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDaasx']}" id="daasx" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScasx']}" id="scasx" value="Preference" />

  <!--
      finescale modeler
      science division
  -->
  <input type="hidden" class="cw" th:field="*{items['cusCwfsm']}" id="cwfsm" value="yes" />
  <input type="hidden" class="da" th:field="*{items['cusDafsm']}" id="dafsm" value="current date" />
  <input type="hidden" class="sc" th:field="*{items['cusScfsm']}" id="scfsm" value="Preference" />

  <!-- service controll -->
  <input type="hidden" id="science" th:field="*{items['scienceOptIn']}" />
  <input type="hidden" id="hobby" th:field="*{items['hobbyOptIn']}" />

  <input type="hidden" th:field="*{brand}" />
  <input type="hidden" th:field="*{items['cusCustomerIdHash']}" />

</th:block>


<th:block th:fragment="scripts">


  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5fa300d5f522a739abe382cb" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script th:src="@{/companies-static/kalmbachmedia/js/webflow.js}" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->

  <script type="text/javascript">


		function clearError() {
			$("#w-form-fail").html("").hide();
			return true;
		}

		function validateEmail() {
			updateDivBeforeSubmit();

			var email = $("#Email").val();
			if(!email){
				$("#w-form-fail").append("<p>Email Address field is blank. Please enter your Email Address.</p>").show();
				return false;
			}

			var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
			return (email && regex.test(email)) || ($("#w-form-fail").append("<p>Email Address is not valid. Please enter a valid Email Address.</p>").show() && false);
		}

		function validateBirthday() {
			var bday = $("#Date").val();
			if(!bday){
		//		$("#w-form-fail").append("<p>Date of Birth is blank. Please enter your Date of Birth in this format MM-DD-YYYY</p>").show()
		//		return false;

				return true; // ok bec birthday can be empty
			}

			var regex = /^\d\d\-\d\d\-\d\d\d\d$/;
			return (!bday || regex.test(bday)) || ($("#w-form-fail").append("<p>Date of Birth is not valid. Please enter your Date of Birth in this format MM-DD-YYYY.</p>").show() && false);
		}

		$(function() {$("select").change(function () { $(this).removeClass("empty") })});

		function validate(){
			clearError();
			return (validateEmail() && validateBirthday());
			//return (validateEmail() && validateBirthday()) || ($(window).scrollTo('250px') && false);
		}


		$("#hbsi").change(function(){
			if($('#hbsi').is(':checked')){$("#hbs2i").prop('checked', true);}else{$("#hbs2i").prop('checked', false);}
		});

		$("#hbs2i").change(function(){
			if($('#hbs2i').is(':checked')){$("#hbsi").prop('checked', true);}else{$("#hbsi").prop('checked', false); }
		});

		/// validate


		function getDivisionMap(){
		  let divisionMap = new Map();
		  	divisionMap.set("ctr","hobby");
		  	divisionMap.set("ctt","hobby");
		  	divisionMap.set("grw","hobby");
		  	divisionMap.set("hbs","hobby");
		  	divisionMap.set("mrr","hobby");
		  	divisionMap.set("trn","hobby");
		  	divisionMap.set("tdc","hobby");
		  	divisionMap.set("tin","hobby");
		  	divisionMap.set("asy","science");
		  	divisionMap.set("dsc","science");
		  	divisionMap.set("sci","science");
		  	divisionMap.set("asx","science");
		  	divisionMap.set("fsm","hobby");
		  	return divisionMap;
		}

		function getAllBrands(){
			const brands = new Set();
			brands.add("ctr");
			brands.add("ctt");
			brands.add("grw");
			brands.add("hbs");
			brands.add("mrr");
			brands.add("trn");
			brands.add("tdc");
			brands.add("tin");
			brands.add("asy");
			brands.add("dsc");
			brands.add("sci");
			brands.add("asx");
			brands.add("fsm");
			return brands;
		}

		let divisionMap = getDivisionMap();
		divisionMap.get("");

		function idToAttribute(id){
			return id.split("'")[1].substr(-3);
		}

		function isBrandSet(id){
				let cw = $("#cw"+id)
				return (cw.val() == 'Yes');
		}

		function setDivision(div){
			$("#"+div).val("Y");
		}

		function updateDivBeforeSubmit(){
		    setBirthDate();
			// for each brand
				// check hidden brand attr
				  // set division in accordance to checked brand
			let brands = getAllBrands();
			let divisionAssociation = getDivisionMap();
			for (let brand of brands.values()){
				if(isBrandSet(brand)){
					let division = divisionAssociation.get(brand);
					setDivision(division);
				}
			}

		}



		function initValues(){
			//hbsi and hbs2i
			// for each brand
				// check hidden brand value for cw
				  // set associated Brand value in form
				  		// if value Yes -> check and disable

						let brands = getAllBrands();
						let divisionAssociation = getDivisionMap();
						for (let brand of brands.values()){
							if(isBrandSet(brand)){
								let division = divisionAssociation.get(brand);
								setDivision(division);

								let formFiledId = "#"+brand+"i";

								console.log(formFiledId);

								if(formFiledId=="#hbsi"){
									$("#hbs2i").prop('checked', true);
									$("#hbs2i").prop('disabled', true);
								}
								$(formFiledId).prop('checked', true);
								$(formFiledId).prop('disabled', true);

							}
						}

		}initValues();

		function getTimeNow(){
			var offset = new Date().getTimezoneOffset();
        	var date = new Date();
        	date.setMinutes ( date.getMinutes() + offset);
        	var easternTimeOffset = 300;//CT 240;//EST
        	date.setMinutes ( date.getMinutes() - easternTimeOffset);
			let dt = formatToISO(date);

			//date.toISOString();
			//dt = dt.split(".")[0];

			return dt;
		}

		function formatToISO(d){
		  // 2021-06-22T18:39:50
		  let year = d.getFullYear();
		  let month = format2(d.getMonth()+1);
		  let day = format2(d.getDate());
		  let hours = format2(d.getHours());
		  let minutes = format2(d.getMinutes());
		  let seconds = format2(d.getSeconds());

		  return year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds;

		}
		function format2(d){
		  if(d<10)return "0"+d;
		  return d;
		}



		function setBrand(id){
				let cw = $("#cw"+id);
				let da = $("#da"+id);
				let sc = $("#sc"+id);
				cw.val("Yes");
				da.val(getTimeNow());
				sc.val("Preference");
		}

		function clearBrand(id){
				let cw = $("#cw"+id);
				let da = $("#da"+id);
				let sc = $("#sc"+id);
				cw.val("");
				da.val("");
				sc.val("");
		}

		$(".brand").change(function(evt){
		 let id = $(this).attr("name").toLowerCase();
			if ($(this).is(':checked')) {
    			setBrand(id);
  			}else{
  				clearBrand(id);
  			}
		});

      function setBirthDate(){
		if($("#birthDate").val()){
		  let birthDate = $("#birthDate").val();
		  let ar = birthDate.split("-");
		  if(ar.length==3){
            $("#cusDabir").val(getTimeNow());
            $("#cusCwbir").val("Yes");
		    $("#cusScbir").val("Preference");
		  }

		}else{
		  $("#cusCwbir").val("");
          $("#cusDabir").val("");
		  $("#cusScbir").val("");
		}
      }
     console.log("time now is "+getTimeNow());
	</script>
</th:block>


</body>
</html>